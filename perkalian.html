<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Latihan Perkalian</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f2f2f2;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
        .timer {
            font-size: 20px;
            font-weight: bold;
            color: red;
            text-align: center;
            margin-bottom: 20px;
        }
        .soal {
            margin-bottom: 8px;
        }
        .salah {
            color: red;
            font-size: 14px;
            margin-left: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
        .hasil {
            margin-top: 20px;
            font-size: 18px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<h1>Latihan Perkalian (Di Bawah 10)</h1>
<div class="timer" id="timer">Waktu: 02:00</div>

<div id="soal-container"></div>

<button onclick="selesai()">Selesai</button>

<div class="hasil" id="hasil"></div>

<script>
    const jumlahSoal = 30;
    let jawabanBenar = [];
    let interval;
    let waktu;
    let daftarSoal = [];

    function generateSoalUnik() {
        daftarSoal = [];

        for (let a = 2; a <= 9; a++) {
            for (let b = 2; b <= 9; b++) {
                daftarSoal.push({ a, b });
            }
        }

        // Acak soal (Fisher-Yates)
        for (let i = daftarSoal.length - 1; i > 0; i--) {
            let j = Math.floor(Math.random() * (i + 1));
            [daftarSoal[i], daftarSoal[j]] = [daftarSoal[j], daftarSoal[i]];
        }

        // Ambil 30 soal unik
        daftarSoal = daftarSoal.slice(0, jumlahSoal);
    }

    function tampilkanSoal() {
        const container = document.getElementById("soal-container");
        container.innerHTML = "";
        jawabanBenar = [];

        daftarSoal.forEach((soal, i) => {
            jawabanBenar.push(soal.a * soal.b);

            container.innerHTML += `
                <div class="soal">
                    ${i + 1}. ${soal.a} Ã— ${soal.b} =
                    <input type="number" id="jawaban${i}">
                    <span id="info${i}" class="salah"></span>
                </div>
            `;
        });
    }

    function mulaiTimer() {
        clearInterval(interval);
        waktu = 120;
        const timerElement = document.getElementById("timer");

        interval = setInterval(() => {
            let menit = Math.floor(waktu / 60);
            let detik = waktu % 60;

            timerElement.textContent =
                `Waktu: ${String(menit).padStart(2, '0')}:${String(detik).padStart(2, '0')}`;

            waktu--;

            if (waktu < 0) selesai();
        }, 1000);
    }

    function selesai() {
        clearInterval(interval);
        let skor = 0;

        for (let i = 0; i < jumlahSoal; i++) {
            let input = document.getElementById(`jawaban${i}`);
            let info = document.getElementById(`info${i}`);
            let jawabanUser = parseInt(input.value);

            if (jawabanUser === jawabanBenar[i]) {
                skor++;
                info.textContent = "";
            } else {
                info.textContent = `Jawaban benar: ${jawabanBenar[i]}`;
            }
        }

        document.getElementById("hasil").textContent =
            `Skor Anda: ${skor} / ${jumlahSoal}`;

        // Ulang otomatis
        setTimeout(() => {
            document.getElementById("hasil").textContent = "";
            generateSoalUnik();
            tampilkanSoal();
            mulaiTimer();
        }, 3000);
    }

    // Mulai pertama
    generateSoalUnik();
    tampilkanSoal();
    mulaiTimer();
</script>

</body>
</html>
